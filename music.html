<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COPIA - MUSIC</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Press+Start+2P&family=Quicksand:wght@300..700&family=VT323&display=swap" rel="stylesheet">

<style>
    html, body {
        margin: 0;
        padding: 0;
        overflow-x: hidden;
    }
     body {
            background: linear-gradient(45deg, #ff00fb, #00ffff);
            min-height: 150vh;
            margin: 0;
            background-attachment: fixed;
            overflow-x: hidden;
        }

        .background-video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            object-fit: cover;
            opacity: 30%;
            z-index: -1;
        }

    .video-container {
        position: absolute;
        max-width: 100vw;
        will-change: transform;
        transform-style: preserve-3d;
    }

    .fixed-element {
        position: fixed !important;
        transform: none !important;
    }
</style>
</head>
<body>
   <video class="background-video fixed-element" autoplay loop muted playsinline>
    <source src="https://res.cloudinary.com/djddsm416/video/upload/v1754604890/TV_STATIC_4K_60FPS_bjfnpa.mp4" type="video/mp4">
</video>

<div style="position:fixed; background-color:  rgb(255, 0, 0); width: 100%; height: 100vh; z-index: 21; mix-blend-mode: multiply; user-select: none; pointer-events: none; opacity: 80%;"></div>

<div style="position:fixed; background-color:  rgb(0, 0, 0); width: 100%; height: 100vh; z-index: 20; mix-blend-mode:saturation; user-select: none; pointer-events: none;"></div>




<div class="menu-hor-estilo">
       <a class="button-1" href="index.html" rel="history">HOME</a>     
       <a class="button-1" href="video.html" rel="history">VIDEO</a>
        <a class="button-1" href="img.html" rel="history">IMG</a>
        <a class="button-1" href="music.html" rel="history">MUSIC</a>
        <a class="button-1" href="others.html" rel="history">OTHERS</a>
</div>
    
<div class="mobile-menu">
    <button class="button-1 mobile-menu-button">☰</button>
    <div class="mobile-menu-items">
        <a class="button-1" href="index.html">HOME</a>
        <a class="button-1" href="video.html">VIDEO</a>
        <a class="button-1" href="music.html">MUSIC</a>
        <a class="button-1" href="others.html">OTHERS</a>
    </div>


<div class="titulo-estilo fixed-element">
    MUSIC
</div>

<div class="habilidades-estilo fixed-element" style="z-index: 300;">
    <span class="button-2 heartbeat-1">COMPOSER</span>
    <span class="button-2 heartbeat-1">DJ</span>
    <span class="button-2 heartbeat-1">REC</span>
    <span class="button-2 heartbeat-2">MIX</span>
    <span class="button-2 heartbeat-3">PRODUCTION</span>
    <span class="button-2 heartbeat-3">ALSO I LIKE TO DANCE</span>
</div>
    
<div class="text-1" style="position: absolute; top: 60%; left: 17%; scale: 200%; z-index: 100;">
    Used to play drums, then guitar, now electronic music.
    <br>
    probably go back to drums.
    <br>
    I'm part of <a href="https://instagram.com/konventklub" target="_blank" style="color: #ffffff;">Konvent Klub</a> as a DJ.
    <br>
    Currently making music.
    <br>
    Nothing online, yet.


</div>

<div style="position: absolute; top:18%; right: 15%; z-index: 800; rotate: 3deg;">
    <div class="image-wrapper" style="width: 400px; height: auto;">
        <video id="kkVideo"
            src="https://res.cloudinary.com/djddsm416/video/upload/v1755124901/KK_2025-Kontrast_COPIA-reel_ofzus7.mp4"
            autoplay loop muted playsinline style="width: 100%; border-radius: 8px; cursor:pointer;"></video>
    </div>
</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const video = document.getElementById('kkVideo');
    video.addEventListener('click', function() {
        video.muted = !video.muted;
    });
});
</script>


<div class="text-1" style="position: absolute; top: 120%; left: 17%; scale: 200%; z-index: 100;">
RECORDS where I did things


</div>

  <script>
const images = [
    { src: "https://res.cloudinary.com/djddsm416/image/upload/v1754947796/copia-music-5_m7zbjc.jpg", width: "449px", alt: "ARIPA - TALANDOBELISCOS", alt2: "REC/MIX/PROD" },
    { src: "https://res.cloudinary.com/djddsm416/image/upload/v1754947795/copia-music-2_mehj2a.jpg", width: "449px", alt: "MORDANDO PASTO RULERO", alt2: "COMP/MIX/PROD"},
    { src: "https://res.cloudinary.com/djddsm416/image/upload/v1754947795/copia-music-3_v3uvib.jpg", width: "449px", alt: "CHIKITAKE", alt2: "MIX"},
    { src: "https://res.cloudinary.com/djddsm416/image/upload/v1754947795/copia-music-4_mifazw.jpg", width: "449px", alt: "PERRO ZEN - VOL.1", alt2: "REC/MIX"},
    { src: "https://res.cloudinary.com/djddsm416/image/upload/v1754947795/copia-music-1_mxlbuh.jpg", width: "449px", alt: "ARIPA - VIVO Y DESPROLIJO", alt2: "REC/MIX"},
    { src: "https://res.cloudinary.com/djddsm416/image/upload/v1754947796/copia-music-8_xwcbfw.jpg", width: "449px", alt: "FERMIN", alt2: "MIX"},
    { src: "https://res.cloudinary.com/djddsm416/image/upload/v1754947796/copia-music-9_lvidvk.jpg", width: "449px", alt: "FELIPE CACHORRO - AL DENTE", alt2: "REC/MIX"},
    { src: "https://res.cloudinary.com/djddsm416/image/upload/v1754947796/copia-music-10_ywrfgk.jpg", width: "449px", alt: "MORDANDO PASTO RULERO - LIMBO", alt2: "COMP/REC/MIX"},
    { src: "https://res.cloudinary.com/djddsm416/image/upload/v1754947797/copia-music-11_hvnzbi.jpg", width: "449px", alt: "LOS AULLIDOS", alt2: "REC/MIX"},
    { src: "https://res.cloudinary.com/djddsm416/image/upload/v1754947797/copia-music-12_bot9i6.jpg", width: "449px", alt: "HANNAKA - TO EAT THE SUN", alt2: "PROD/REC"},
    { src: "https://res.cloudinary.com/djddsm416/image/upload/v1754947798/copia-music-13_dw2l4j.jpg", width: "449px", alt: "MORADANDO PASTO RULERO - LOS ATLETICOS", alt2: "COMP/REC/MIX"},
    { src: "https://res.cloudinary.com/djddsm416/image/upload/v1754947798/copia-music-14_c7jbx9.jpg", width: "449px", alt: "POTLATCH", alt2: "PROD/REC/MIX"},
    { src: "https://res.cloudinary.com/djddsm416/image/upload/v1754947799/copia-music-15_wwy2ez.jpg", width: "449px", alt: "NO SALGAS CON ROBOTS - LA CARAVANA", alt2: "REC/MIX"},
    { src: "https://res.cloudinary.com/djddsm416/image/upload/v1754947800/copia-music-16_mv5aig.jpg", width: "449px", alt: "EL PLAN DE LA MARIPOSA - LA CRECIDA", alt2: "REC/MIX"},
    { src: "https://res.cloudinary.com/djddsm416/image/upload/v1754947800/copia-music-17_owmzlt.jpg", width: "449px", alt: "SACHERIS", alt2: "REC/MIX"},
    { src: "https://res.cloudinary.com/djddsm416/image/upload/v1754947800/copia-music-18_kpfrsw.jpg", width: "449px", alt: "LOS PERÉZ GARCIA - QUE PASA EN EL BARRIO", alt2: "REC"},
    { src: "https://res.cloudinary.com/djddsm416/image/upload/v1754947801/copia-music-19_wmtanm.jpg", width: "449px", alt: "LA PERRERA - PERRO MALVADO", alt2: "REC"},
    { src: "https://res.cloudinary.com/djddsm416/image/upload/v1754947801/copia-music-20_kfqze2.jpg", width: "449px", alt: "LA PERA DE MILIO - QUE MIEDO", alt2: "REC/MIX"},



    // Agrega más imágenes aquí
];

// Revisa estos z-index base para tu página:
// 2000: para la imagen que se está ARRATRANDO (siempre encima de todo)
// 100: para la imagen que se ha CLICKEADO RÁPIDAMENTE y está AGRANDADA
// 10: para las imágenes en su posición normal inicial (fondo de las arrastrables)
// 5: para las imágenes ARRASTRADAS y SOLTADAS O CLICADAS RÁPIDAMENTE y ACHICADAS
let highestZIndex = 100;
let isDragging = false;
let activeContainer = null;
let initialX, initialY, startTime;

function createImages() {
    const container = document.querySelector('body');
    
    images.forEach((img, index) => {
        const div = document.createElement('div');
        div.className = 'video-container draggable';
        div.style.width = img.width;
        div.style.cursor = 'grab';
        div.style.position = 'absolute'; // Ensure position is set
        div.dataset.speed = 0.15 + (index * 0.02); // Ajusta la velocidad de parallax
        div.style.zIndex = '10'; // Z-index inicial para las imágenes no arrastradas
        
        const imgElement = document.createElement('img');
        imgElement.src = img.src;
        imgElement.alt = img.alt;
        imgElement.style.width = '100%';
        imgElement.style.height = 'auto';
        
        const captionDiv = document.createElement('div');
        captionDiv.className = 'caption';
        captionDiv.textContent = img.alt;
        
        const captionSecondaryDiv = document.createElement('div');
        captionSecondaryDiv.className = 'caption-secondary';
        captionSecondaryDiv.textContent = img.alt2;
        
        div.appendChild(imgElement);
        div.appendChild(captionDiv);
        div.appendChild(captionSecondaryDiv);
        
        container.appendChild(div);
        
        // Add drag functionality to each container
        div.addEventListener('mousedown', (e) => {
            isDragging = true;
            activeContainer = div;
            startTime = new Date().getTime();
            
            // Cuando empiezas a arrastrar, lo pones encima de todo
            highestZIndex++; // Asegura que el nuevo arrastre siempre esté en la cima
            div.style.zIndex = highestZIndex;
            
            initialX = e.clientX - div.offsetLeft;
            initialY = e.clientY - div.offsetTop;
            
            
            div.style.cursor = 'grabbing';
            e.preventDefault(); // Evita el arrastre nativo de la imagen
        });
    });
}

// Global mouse event handlers
document.addEventListener('mousemove', (e) => {
    if (!isDragging || !activeContainer) return;
    
    e.preventDefault();
    const currentX = e.clientX - initialX;
    const currentY = e.clientY - initialY;
    
    activeContainer.style.left = `${currentX}px`;
    activeContainer.style.top = `${currentY}px`;
});

document.addEventListener('mouseup', () => {
    if (!activeContainer) return;
    
    const endTime = new Date().getTime();
    const timeDiff = endTime - startTime;
    
    if (timeDiff < 200) { // Si fue un clic corto (no un arrastre largo)
        const isScaled = activeContainer.style.transform.includes('scale(1.2)');
        
        if (isScaled) { // Si estaba agrandada y ahora se achica
            activeContainer.style.transform = `scale(1)`; // Achicarla a su tamaño original
            activeContainer.style.zIndex = '5'; // Vuelve a z-index 5
        } else { // Si estaba achicada (o normal) y ahora se agranda
            activeContainer.style.transform = `scale(1.2)`; // Agrandarla
            activeContainer.style.zIndex = '100'; // Sube a z-index 100
        }
    } else { // Si fue un arrastre (no un clic corto)
        activeContainer.style.zIndex = '5'; // Siempre vuelve a z-index 5 después de arrastrar
    }
    
    isDragging = false;
    activeContainer.style.cursor = 'grab';
    activeContainer = null;
});

// Parallax effect
function parallax() {
    const containers = document.querySelectorAll('.video-container');
    const scrolled = window.pageYOffset;
    
    containers.forEach(container => {
        const speed = parseFloat(container.dataset.speed);
        const yPos = -(scrolled * speed);
        
        const currentTransform = container.style.transform || '';
        const scaleMatch = currentTransform.match(/scale\((.*?)\)/);
        const scale = scaleMatch ? scaleMatch[1] : '1';
        
        container.style.transform = `translateY(${yPos}px) scale(${scale})`;
    });
}

function distributeImages() {
    const containers = document.querySelectorAll('.video-container');
    const gridSize = 4; 
    const chaosLevel = 0.5;
    
    const minMargin = 50;
    const topMargin = 1200;
    const rowSpacing = 500; 
    const windowWidth = window.innerWidth - (minMargin * 2);
    
    const cellWidth = windowWidth / gridSize;
    
    containers.forEach((container, index) => {
        const col = index % gridSize; 
        const row = Math.floor(index / gridSize); 
        
        const randomX = (Math.random() - 0.5) * cellWidth * chaosLevel;
        const randomY = (Math.random() - 0.5) * rowSpacing * chaosLevel;
        
        const containerWidth = container.offsetWidth || parseInt(container.style.width) || 449; // Fallback
        const baseX = minMargin + (col * cellWidth) + (cellWidth/2) - containerWidth/2;
        const baseY = topMargin + (row * rowSpacing); 
        
        const finalX = baseX + randomX;
        const finalY = baseY + randomY;
        
        container.style.left = `${Math.max(minMargin, Math.min(windowWidth - containerWidth, finalX))}px`;
        container.style.top = `${finalY}px`;
    });
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
    createImages();
    
    setTimeout(() => {
        distributeImages();
        
        const allContainers = document.querySelectorAll('.video-container');
        allContainers.forEach(container => {
            if (!container.dataset.speed) {
                container.dataset.speed = (0.15 + (Math.random() * 0.2)).toFixed(2);
            }
        });
        
        window.addEventListener('scroll', () => {
            requestAnimationFrame(parallax);
        });
    }, 100); 
});


// --- Lógica del Menú Móvil ---
document.addEventListener('DOMContentLoaded', function() {
    const menuButton = document.querySelector('.mobile-menu-button');
    const menuItems = document.querySelector('.mobile-menu-items');

    if (menuButton && menuItems) {
        menuButton.addEventListener('click', function() {
            menuItems.classList.toggle('active');
        });
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.mobile-menu')) {
                menuItems.classList.remove('active');
            }
        });
    }
});


// --- Inicialización de Eventos de Carga ---
document.addEventListener('DOMContentLoaded', fetchAndCreateImages);

// Run on window resize
let resizeTimeout;
window.addEventListener('resize', () => {
    clearTimeout(resizeTimeout);
    // Si la ventana cruza el umbral de móvil/escritorio, recarga para renderizar la galería correcta
    const wasMobile = window.innerWidth <= 768;
    
    resizeTimeout = setTimeout(() => {
        const isMobile = window.innerWidth <= 768;
        if (wasMobile !== isMobile) {
             window.location.reload();
        } else if (!isMobile) {
            distributeImages();
        }
    }, 200);
});

</script>

    


    






</body>
</html>